#include <iostream>
#include <sstream>
#include <vector>
#include <ctime>
#include "Compiler/Lexer/Lexer.h"

using namespace std;
using namespace sfsl;

int main()
{
    std::string source = "module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }module Main{ def main() => 3.141592653589793 and 4.5 || 12 * 5 -(3, 5) / 5.6 { /* helloasdasd njndf \n asdasd*/ print $\\ ln(\"hello world\" + 12); // } }";

    size_t total = 0;
    size_t count = 0;

    clock_t exec = clock();

    std::string* src_str = new std::string("hardcoded");

    while (true) {
        common::ChunkedMemoryManager mem_mngr(2048);
        std::istringstream input(source);

        src::SFSLInputStream src(src_str, input);

        lex::Lexer lexer(mem_mngr, src);

        while (lexer.hasNext()) {
            lexer.getNext();
            ++count;
        }

        if (count > 10000000) {
            total += count;
            count = 0;
            break;
        }
    }

    cout << total << std::endl;
    cout << "Execution Time : " << (clock() - exec)/(double)CLOCKS_PER_SEC << endl << endl;
}

